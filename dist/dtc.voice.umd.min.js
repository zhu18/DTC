/**
  * dtc V1.0.7
  * (c) 2018-2019
  * Copyright all contributors
  * @license Released under MIT license.
  */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).voice={})}(this,function(e){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(n.single_instance||(n.single_instance=this),e=Object.assign({lang:"zh-CN",volume:1,rate:.8,pitch:1},e),!function(){try{return new window.SpeechSynthesisUtterance,!0}catch(e){return!1}}())return console.log("your browser do net support the API, visit https://developer.mozilla.org/en-US/docs/Web/API/SpeechSynthesisUtterance get more infomation"),null;var t=window.speechSynthesis,o=new SpeechSynthesisUtterance;return Object.keys(e).forEach(function(n){o[n]=e[n]}),this.speak=function(e){e&&(o.text=e,t.speak(o))},this.cancel=function(){t.cancel()},this.setOption=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(e,n),Object.keys(e).forEach(function(n){o[n]=e[n]})},this.addEventListener=function(e,n){o.addEventListener(e,n)},this.getOption=function(){return{lang:o.lang,volume:o.volume,rate:o.rate,pitch:o.pitch}},this.getStatus=function(){return{paused:t.paused,pending:t.pending,speaking:t.speaking}},n.single_instance}function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o,r=(function(e){var n,o,r="function"==typeof Symbol&&"symbol"==t(Symbol.iterator)?function(e){return t(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":t(e)};n="undefined"!=typeof window?window:void 0,o=function(e,n){var t,o=e.SpeechRecognition||e.webkitSpeechRecognition||e.mozSpeechRecognition||e.msSpeechRecognition||e.oSpeechRecognition;if(!o)return null;var i,a,c=[],s={start:[],error:[],end:[],soundstart:[],result:[],resultMatch:[],resultNoMatch:[],errorNetwork:[],errorPermissionBlocked:[],errorPermissionDenied:[]},u=0,l=0,f=!1,p="font-weight: bold; color: #00f;",d=!1,g=!1,h=/\s*\((.*?)\)\s*/g,y=/(\(\?:[^)]+\))\?/g,m=/(\(\?)?:\w+/g,b=/\*\w+/g,v=/[\-{}\[\]+?.,\\\^$|#]/g,S=function(e){for(var n=arguments.length,t=Array(1<n?n-1:0),o=1;o<n;o++)t[o-1]=arguments[o];e.forEach(function(e){e.callback.apply(e.context,t)})},w=function(){return i!==n},k=function(e,n){-1!==e.indexOf("%c")||n?console.log(e,n||p):console.log(e)},x=function(){w()||t.init({},!1)},P=function(e,n,t){c.push({command:e,callback:n,originalPhrase:t}),f&&k("Command successfully loaded: %c"+t,p)},R=function(e){var n;S(s.result,e);for(var t=0;t<e.length;t++){n=e[t].trim(),f&&k("Speech recognized: %c"+n,p);for(var o=0,r=c.length;o<r;o++){var i=c[o],a=i.command.exec(n);if(a){var u=a.slice(1);return f&&(k("command matched: %c"+i.originalPhrase,p),u.length&&k("with parameters",u)),i.callback.apply(this,u),void S(s.resultMatch,n,i.originalPhrase,e)}}}S(s.resultNoMatch,e)};return t={init:function(r){var p=!(1<arguments.length&&arguments[1]!==n)||arguments[1];i&&i.abort&&i.abort(),(i=new o).maxAlternatives=5,i.continuous="http:"===e.location.protocol,i.lang="en-US",i.onstart=function(){g=!0,S(s.start)},i.onsoundstart=function(){S(s.soundstart)},i.onerror=function(e){switch(S(s.error,e),e.error){case"network":S(s.errorNetwork,e);break;case"not-allowed":case"service-not-allowed":a=!1,(new Date).getTime()-u<200?S(s.errorPermissionBlocked,e):S(s.errorPermissionDenied,e)}},i.onend=function(){if(g=!1,S(s.end),a){var e=(new Date).getTime()-u;(l+=1)%10==0&&f&&k("Speech Recognition is repeatedly stopping and starting. See http://is.gd/annyang_restarts for tips."),e<1e3?setTimeout(function(){t.start({paused:d})},1e3-e):t.start({paused:d})}},i.onresult=function(e){if(d)return f&&k("Speech heard, but annyang is paused"),!1;for(var n=e.results[e.resultIndex],t=[],o=0;o<n.length;o++)t[o]=n[o].transcript;R(t)},p&&(c=[]),r.length&&this.addCommands(r)},start:function(e){x(),d=(e=e||{}).paused!==n&&!!e.paused,a=e.autoRestart===n||!!e.autoRestart,e.continuous!==n&&(i.continuous=!!e.continuous),u=(new Date).getTime();try{i.start()}catch(e){f&&k(e.message)}},abort:function(){a=!1,l=0,w()&&i.abort()},pause:function(){d=!0},resume:function(){t.start()},debug:function(){var e=!(0<arguments.length&&arguments[0]!==n)||arguments[0];f=!!e},setLanguage:function(e){x(),i.lang=e},addCommands:function(n){var t,o;for(var i in x(),n)if(n.hasOwnProperty(i))if("function"==typeof(t=e[n[i]]||n[i]))P((o=(o=i).replace(v,"\\$&").replace(h,"(?:$1)?").replace(m,function(e,n){return n?e:"([^\\s]+)"}).replace(b,"(.*?)").replace(y,"\\s*$1?\\s*"),new RegExp("^"+o+"$","i")),t,i);else{if(!("object"===(void 0===t?"undefined":r(t))&&t.regexp instanceof RegExp)){f&&k("Can not register command: %c"+i,p);continue}P(new RegExp(t.regexp.source,"i"),t.callback,i)}},removeCommands:function(e){e===n?c=[]:(e=Array.isArray(e)?e:[e],c=c.filter(function(n){for(var t=0;t<e.length;t++)if(e[t]===n.originalPhrase)return!1;return!0}))},addCallback:function(t,o,r){var i=e[o]||o;"function"==typeof i&&s[t]!==n&&s[t].push({callback:i,context:r||this})},removeCallback:function(e,t){var o=function(e){return e.callback!==t};for(var r in s)s.hasOwnProperty(r)&&(e!==n&&e!==r||(s[r]=t===n?[]:s[r].filter(o)))},isListening:function(){return g&&!d},getSpeechRecognizer:function(){return i},trigger:function(e){t.isListening()?(Array.isArray(e)||(e=[e]),R(e)):f&&k(g?"Speech heard, but annyang is paused":"Cannot trigger while annyang is aborted")}}},"object"===r(e)&&e.exports?e.exports=o(n):n.annyang=o(n)}(o={exports:{}},o.exports),o.exports),i={Synthesis:n,annyang:r};e.default=i,e.Synthesis=n,e.annyang=r,Object.defineProperty(e,"__esModule",{value:!0})});
